<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Image Embed</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        display: block;
        padding: 20px;
        background-color: #f0f0f0;
      }
      .button-container {
        margin-bottom: 20px;
      }
      .embed-container {
        width: 100%;
        height: 90vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 5;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        background-color: #fff;
        border-radius: 8px;
        overflow: hidden;
      }
      img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        border-radius: 8px;
      }
    </style>
  </head>
  <body>
    <!-- Endpoint Selector -->
    <div class="button-container">
      <label for="apiSelector">Select API Endpoint:</label>
      <select id="apiSelector">
        <option value="https://api.waifu.pics/nsfw/waifu">NSFW Waifu</option>
        <option value="https://api.waifu.pics/sfw/waifu">SFW Waifu</option>
        <option value="https://api.waifu.pics/nsfw/neko">NSFW Neko</option>
        <option value="https://api.waifu.pics/sfw/neko">SFW Neko</option>
      </select>
      <button id="actionButton">Fetch Image</button>
    </div>

    <!-- Fixed Image Container -->
    <div class="embed-container" id="embedContainer">
      <img alt="Sample Image" id="embeddedImage" />
    </div>
    <script src="script.js"></script>
    <script>
      // Get elements
      const actionButton = document.getElementById("actionButton");
      const embeddedImage = document.getElementById("embeddedImage");
      const apiSelector = document.getElementById("apiSelector");

      // Add event listener for button click
      actionButton.addEventListener("click", async () => {
        try {
          const selectedApi = apiSelector.value;
          const res = await fetch(
            "/api/image?url=" + encodeURIComponent(selectedApi)
          );
          const { url } = await res.json();
          embeddedImage.src = url;
        } catch (error) {
          console.error("Error fetching image:", error);
        }
      });
    </script>
  </body>
</html>
